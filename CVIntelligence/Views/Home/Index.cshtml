@{
    ViewBag.Title = "Home Page";
}

<div class="row" ng-app="" ng-controller="CvGeneratorController">
    <div class="container col-lg-12">
        <div class="">
            <h2>Let the magic happen!</h2>
        </div>
        <div class="">
            <form name="generateForm" ng-submit="submitForm(generateForm.$valid)" novalidate>
                <div class="form-group">
                    <input type="file" ng-model="fileUrl" class="filestyle form-control" data-buttonbefore="true" required="">
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-primary" ng-disabled="generateForm.$invalid">Generate CV</button>
                </div>
            </form>
        </div>

        <div class="">
            <p>The JSON Result is here!</p>
            <pre><code class=""><p>Hi</p>
                </code></pre>
        </div>

    </div>
</div>
@*<script>hljs.initHighlightingOnLoad();</script>*@
<script>
    function CvGeneratorController($scope, $http) {
        $scope.submitForm = function(isValid) {
            if (isValid) {
                $http.post("@Url.Action("GenerateCv","Home")",$scope.fileUrl).success(function () {
                    //toastr.success('Thank you for requesting.<br/> We will get back to you soon.');
                    //$scope.registerForm.$dirty = false;
                    //$scope.registerForm.$pristine = true;
                    //$scope.registerForm.$submitted = false;
                    //$scope.registerForm.$setPristine(true);
                    $scope.fileUrl = "";
                    $scope.GenerateForm.$setPristine();
                }).error(function () {
                    //toastr.error("An error occured, try again!");
                });

            }
        };
        
    }
</script>